<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>HackCMU</title>
    <script type="text/javascript"
            src = "simpleGame.js"></script>
    <script type="text/javascript">
        var player;
        var space;
        var game;
        var delay = .2;
        var timer;
        
        function Player(){
            tPlayer = new Sprite(game, "cute.gif", 40, 40);
            tPlayer.setSpeed(0);
            tPlayer.direction = 90;
            tPlayer.falling = true;
            
            tPlayer.checkKeys = function(){
                elapsedTime = timer.getElapsedTime();
                this.setBoundAction(BOUNCE);
                if (keysDown[K_LEFT]){
                    this.direction = 270;
                    this.changeXby(-5);
                }
                
                if (keysDown[K_RIGHT]){
                    this.direction = 90;
                    this.changeXby(5);
                }
                
                if (keysDown[K_UP]){
                    this.direction = 0;
                    if (this.falling == false){
                        this.changeYby(-10);
                        this.falling = true;
                        this.addVector(0, 10);
                    }
                }
            } // end checkKeys
            
            tPlayer.checkGravity = function(){
                if (this.falling){
                    this.addVector(180, 1);
                }
                if (this.y >= 500){
                    this.setPosition(this.x, 500);
                    this.falling = false;
                    this.setSpeed(0);
                } else {
                    this.addVector(180, .5);
                } // end if
            } // end checkGravity

            tPlayer.checkBounds = function(){
                if (this.x < 20){ // left
                    this.setPosition(20, this.y);
                }
                if (this.x > 780){ // right
                    this.setPosition(780, this.y);
                }
                if (this.y < 25){ // top
                    this.setPosition(this.x, 25);
                }
            } // end checkBounds

            return tPlayer;
        }

        function init(){
            game = new Scene();
            player = new Player();
            timer = new Timer();
            space = new Sprite(game, "8BitLevel1.png", 1000, 600);
            space.setSpeed(0);
            space.setPosition(500, 300);
            
            game.start();
        } // end init
        
        function update(){
            game.clear();
            space.update();
            
            player.checkKeys();
            player.checkGravity();
            player.checkBounds();
            player.update();
        }
        
    </script>
</head>
<body onload = "init()">   
</body>
</html>
